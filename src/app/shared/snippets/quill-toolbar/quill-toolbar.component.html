<div class="toolbar" [ngClass]="{'form': form}">  <!-- TOOLBAR -->
  <div class="flex">
    <span><i class="far fa-newspaper"></i> {{totalDrafts$ | async}}</span> <!-- TOTAL -->
    @if(saving$ | async; as state) {
      @switch(state.type) {
        @case(saveTypes.SAVING) {
          <div class="animated fadeIn">
            <i [class]="state.value ? 'fas fa-spinner fa-pulse' : 'fas fa-check'"></i> 
            <span>{{state.value ? 'Guardando...' : 'Guardado'}}</span>
          </div>
        }
        @case(saveTypes.WARNING) {
          <div class="animated fadeIn warning">
            <i class="fas fa-exclamation-triangle"></i>
            <span>No se ha podido guardar. Comprueba los datos</span>
          </div>
        }
        @case(saveTypes.TEMPORAL) {
          <div class="animated fadeIn warning">
            <i class="fas fa-exclamation-triangle"></i>
            <span>No se guardar√°n los datos hasta que aceptes.</span>
          </div>
        }
      }
    }
  </div>
  @if({saving: saving$ | async}; as obs) {
    <div class="actions">
      @if(!form) {
        <!-- ACTIONS -->
        @for(item of iconList; track item.label) {
          <i [class]="item.icon"
             [matTooltip]="(!obs.saving?.value && draft) ? item.label : null"
             (click)="switchAction[item.action](obs.saving?.value)"
             [ngClass]="{'disabled': 
                obs.saving?.value || !draft || (draft.temporal && (item.action === 'new'))
             }">
          </i>
        }
        <i class="far fa-question-circle" 
          matTooltip="Ayuda" 
          (click)="switchAction.help()">
        </i>
        <!-- FORM -->
        <i class="fab fa-wpforms"
          [matTooltip]="(!obs.saving?.value && draft) ? 'Formulario' : null"
          [ngClass]="{'disabled': obs.saving?.value || !draft}"
          (click)="switchAction.form()">
        </i>
      }
      @if(form) {
        <!-- CLEAN -->
        <i class="fas fa-broom"
          matTooltip="Limpiar"
          (click)="switchAction.clean()">
        </i>
        <!-- BACK -->
        <i class="fas fa-fast-backward"
          matTooltip="Lienzo"
          [routerLink]="['../']"
          *ngIf="form">
        </i>
      }
    </div>
  }
</div>
